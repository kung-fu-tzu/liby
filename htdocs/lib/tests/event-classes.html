<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru">
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
	<link rel="stylesheet" href="tests.css" type="text/css"/>
	<title>Event classes tests</title>
</head>
<body>

<!--[if lte IE 7]><script type="text/javascript" src="../programica/fixes/trident3.js"></script><![endif]-->
<!--[if IE 8]><script type="text/javascript" src="../programica/trident4.js"></script><![endif]-->
<script type="text/javascript" src="../programica/fixes/log.js"></script>
<script type="text/javascript" src="../programica/init.js"></script>
<script type="text/javascript" src="../programica/prototype.js"></script>
<script type="text/javascript" src="../programica/class.js"></script>
<script type="text/javascript" src="../modules/event-target.js"></script>

<script type="text/javascript" src="tests.js"></script>
<script type="text/javascript">
Tests.job(function (job)
{
	job.test('deleted preventDefault()', function (test)
	{
		test.eq(typeof document.createEvent, 'function', 'document.createEvent is a function')
		test.eq(typeof UIEvent.prototype.preventDefault, 'function')
		delete UIEvent.prototype.preventDefault
		test.eq(document.createEvent('Event').preventDefault, undefined, 'preventDefault must be undefined')
	})
	
	job.test('event base classes', function (test)
	{
		test.ne(self.EventTarget, undefined, 'EventTarget defined')
		test.ne(self.EventException, undefined, 'EventException defined')
		test.ne(self.Event, undefined, 'Event defined')
		test.ne(self.DocumentEvent, undefined, 'DocumentEvent defined')
		test.ne(self.UIEvent, undefined, 'UIEvent defined')
		test.ne(self.MouseEvent, undefined, 'MouseEvent defined')
		test.ne(self.KeyboardEvent, undefined, 'KeyboardEvent defined')
		test.ne(self.MutationEvent, undefined, 'MutationEvent defined')
	})
	
	job.test('constructor', function (test)
	{
		test.eq(document.createEvent('Event').constructor, self.Event, 'Event.constructor')
		test.eq(document.createEvent('UIEvent').constructor, self.UIEvent, 'UIEvent.constructor')
		test.eq(document.createEvent('MouseEvent').constructor, self.MouseEvent, 'MouseEvent.constructor')
		test.eq(document.createEvent('KeyboardEvent').constructor, self.KeyboardEvent, 'KeyboardEvent.constructor')
		test.eq(document.createEvent('MutationEvent').constructor, self.MutationEvent, 'MutationEvent.constructor')
	})
	
	job.test('Event.property', function (test)
	{
		Event.prototype.customProperty = 'works!'
		test.eq(document.createEvent('Event').customProperty, 'works!', 'Event.customProperty')
		test.eq(document.createEvent('UIEvent').customProperty, 'works!', 'UIEvent.customProperty')
		test.eq(document.createEvent('MouseEvent').customProperty, 'works!', 'MouseEvent.customProperty')
		test.eq(document.createEvent('KeyboardEvent').customProperty, 'works!', 'KeyboardEvent.customProperty')
		test.eq(document.createEvent('MutationEvent').customProperty, 'works!', 'MutationEvent.customProperty')
	})
	
	job.test('custom preventDefault()', function (test)
	{
		Event.prototype.preventDefault = function () { return 'works!' }
		test.eq(document.createEvent('Event').preventDefault(), 'works!', 'Event.preventDefault()')
		test.eq(document.createEvent('UIEvent').preventDefault(), 'works!', 'UIEvent.preventDefault()')
		test.eq(document.createEvent('MouseEvent').preventDefault(), 'works!', 'MouseEvent.preventDefault()')
		test.eq(document.createEvent('KeyboardEvent').preventDefault(), 'works!', 'KeyboardEvent.preventDefault()')
		test.eq(document.createEvent('MutationEvent').preventDefault(), 'works!', 'MutationEvent.preventDefault()')
	})
})
</script>
</body>
</html>
