<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru">
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
	<title>Kill Safari</title>
</head>
<body>

<script type="text/javascript">


;(function(){

var myName = 'Test', Me = self[myName] = function () {}
Me.prototype =
{
	status: 'new',
	finished: false,
	
	initialize: function (parent, name, reporter, conf, callback)
	{
		this.results = []
		
		this.reporter = reporter
		this.callback = callback
		
		
		return this
	},
	
	run: function (delay)
	{
		var me = this
		me._run(me.callback)
	},
	
	_run: function (f)
	{
		try
		{
			f(this)
		}
		catch (ex)
		{
			this.fail([ex.message, ex.fileName || ex.sourceURL, ex.line || ex.lineNumber], 'got an exception')
		}
	},
	
	
	
	test: function (name, conf, callback)
	{
		callback(this)
	},
	
	
	pass: function (m, d)
	{
		this.reporter.pass(m, d)
	},
	
	fail: function (m, d)
	{
		this.results.push()
		if (m || d)
			this.reporter.fail(m, d)
	}
}

})();

;(function(){

Array.prototype.indexOf


var myName = 'Inspector'
function Me ()
{
}

Me.prototype =
{
	inspect: function (val, deep, hard)
	{
		return this.walk(val)
	},
	
	walk: function (val)
	{
		var ind = new Array().join()
		{
			[].sort()
		}
	}
}

self[myName] = Me

Test.prototype.inspect = function (val)
{
	var me = new Me()
	return me.inspect.apply(me, arguments)
}


})();



;(function(){

var myName = 'Tests', Me = self[myName] =
{
	nodes: {},
	onload: function ()
	{
		this.run()
	},
	
	test: function (f)
	{
		this.callback = f
	},
	
	run: function ()
	{
		try { var title }
		catch (ex) { title = 'main' }
		
		var reporter = new Reporter().initialize()
		
		var test = this.mainTest = new Test().initialize(this, title, reporter, null, this.callback)
		test.run()
	},
	
	sigchild: function ()
	{
	}
}

window.onload = function () { Me.onload() }


var Reporter = function () {}
Reporter.prototype =
{
	initialize: function (name)
	{
		return this
	},
	
	create: function ()
	{
		var reporter = new Reporter().initialize()
		return reporter
	},
	
	name: function (name)
	{
	},
	
	setStatus: function (s)
	{
	},
	
	summary: function (text)
	{
	},
	
	node: function (node)
	{
	},
	
	line: function (cn, m, desc)
	{
		m.constructor === Array
	},
	
	fail: function (m, d) { this.line('fail', m, d) },
	pass: function (m, d) { this.line('pass', m, d) }
}



})();




Tests.test(function (t)
{
	Array.prototype.xxx6 = 123
	t.pass(123)
	delete Array.prototype.xxx6
	
	t.pass([])
	t.inspect({}) === {}.inspect()
})
</script>

<button onclick="arrayPropto()">delete array.prototype.xxx5</button>

</body>
</html>
