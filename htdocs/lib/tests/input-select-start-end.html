<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
	<meta name="viewport" content="width=device-width"/>
	<title>Tests for HTMLInputElement selectStart/selectEnd</title>
	<script src="tests.common.js" type="text/javascript"></script>
	
	<!--[if lte IE 7]><script type="text/javascript" src="../core/fixes/trident3.js"></script><![endif]-->
	<!--[if gte IE 8]><script type="text/javascript" src="../core/fixes/trident4.js"></script><![endif]-->
</head>
<body>
<input type="text" id="test-1"/>
<input type="text" id="test-2"/>
<input type="text" id="test-3"/>
<script type="text/javascript">
function $ (id) { return document.getElementById(id) }
Tests.test(function (t)
{
	t.test('initial state', function (t)
	{
		var node = $('test-1')
		
		t.eq(node.selectionStart, 0, 'selectionStart')
		t.eq(node.selectionEnd, 0, 'selectionEnd')
	})
	
	t.test('selectionStart', function (t)
	{
		var node = $('test-2')
		
		node.value = ''
		t.eq(node.selectionStart, 0, 'empty')
		
		node.value = 'test'
		t.eq(node.selectionStart, 4, 'with "test" value')
		
		node.value = 'lalala'
		t.eq(node.selectionStart, 6, 'with "lalala" value')
		
		node.value = ''
		t.eq(node.selectionStart, 0, 'empty again')
		
		node.selectionStart = 3
		t.eq(node.selectionStart, 0, 'set on empty')
		
		node.value = 'lololo'
		node.selectionStart = 3
		t.eq(node.selectionStart, 3, 'set on lengthy enough')
	})
	
	t.test('selectionEnd', function (t)
	{
		var node = $('test-2')
		
		node.value = ''
		t.eq(node.selectionEnd, 0, 'empty')
		
		node.value = 'test'
		t.eq(node.selectionEnd, 4, 'with "test" value')
		
		node.value = 'lalala'
		t.eq(node.selectionEnd, 6, 'with "lalala" value')
		
		node.value = ''
		t.eq(node.selectionEnd, 0, 'empty again')
		
		node.selectionEnd = 3
		t.eq(node.selectionEnd, 0, 'set on empty')
		
		node.value = 'lololo'
		node.selectionEnd = 3
		t.eq(node.selectionEnd, 3, 'set on lengthy enough')
	})
	
	t.test('selectionStart with selectionEnd', function (t)
	{
		var node = $('test-3')
		
		node.value = '123456'
		
		t.test('both at the begin', function (t)
		{
			node.selectionStart = 0
			node.selectionEnd = 0
			t.eq(node.selectionStart, 0, 'start')
			t.eq(node.selectionEnd, 0, 'end')
		})
		
		t.test('both at the end', function (t)
		{
			node.selectionStart = 6
			node.selectionEnd = 6
			t.eq(node.selectionStart, 6, 'start')
			t.eq(node.selectionEnd, 6, 'end')
		})
		
		t.test('mixed in order', function (t)
		{
			node.selectionStart = 3
			node.selectionEnd = 4
			t.eq(node.selectionStart, 3, 'start')
			t.eq(node.selectionEnd, 4, 'end')
		})
		
		t.test('mixed out of order', function (t)
		{
			node.selectionStart = 5
			node.selectionEnd = 3
			t.eq(node.selectionStart, 3, 'start')
			t.eq(node.selectionEnd, 3, 'end')
		})
	})
})
</script>
</body>
</html>