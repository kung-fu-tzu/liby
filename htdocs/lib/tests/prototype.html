<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
	<meta name="viewport" content="width=device-width"/>
	<title>Tests for some of the core prototype extensions</title>
	<script src="tests.common.js" type="text/javascript"></script>
	
	<script type="text/javascript" src="../core/prototype.js"></script>
</head>
<body>
<script type="text/javascript">
Tests.test(function (t)
{
	t.test('String#capitalize()', function (t)
	{
		t.eq(''.capitalize(), '', 'empty string')
		t.eq('123'.capitalize(), '123', '123')
		
		t.eq('abc'.capitalize(), 'Abc', 'abc')
		t.eq('Abc'.capitalize(), 'Abc', 'Abc')
		t.eq('эюя'.capitalize(), 'Эюя', 'эюя')
		t.eq('Эюя'.capitalize(), 'Эюя', 'Эюя')
	})
	
	t.test('Function#inherit()', function (t)
	{
		function A () {}
		A.prototype =
		{
			foo: function () { return 'A.foo' },
			bar: function () { return 'A.bar' },
			baz: function () { return 'A.baz' }
		}
		
		
		function B () {}
		B.prototype = new A()
		B.inherit
		({
			foo: function () { return this.aFoo() + ':B.foo' },
			bar: function () { return this.aBar() + ':B.bar' }
		}, 'a')
		
		var b = new B()
		t.eq(b.foo(), 'A.foo:B.foo', 'inherited')
		t.eq(b.bar(), 'A.bar:B.bar', 'inherited')
		
		
		function C () {}
		C.prototype = new B()
		C.inherit
		({
			foo: function () { return this.bFoo() + ':C.foo' },
			bar: function () { return this.bBar() + ':C.bar' }
		}, 'b')
		
		var c = new C()
		t.eq(c.foo(), 'A.foo:B.foo:C.foo', 'inherited')
		t.eq(c.bar(), 'A.bar:B.bar:C.bar', 'inherited')
	})
	
	t.test('Function#inheritLive()', function (t)
	{
		function A () {}
		A.prototype =
		{
			foo: function () { return 'A.foo' },
			bar: function () { return 'A.bar' },
			baz: function () { return 'A.baz' }
		}
		
		
		function B () {}
		B.prototype = new A()
		B.inheritLive
		({
			foo: function () { return this.aFoo() + ':B.foo' },
			bar: function () { return this.aBar() + ':B.bar' }
		}, 'a')
		
		var b = new B()
		t.eq(b.foo(), 'A.foo:B.foo', 'inherited')
		t.eq(b.bar(), 'A.bar:B.bar', 'inherited')
		
		A.prototype.foo = function () { return 'A.foo2' }
		t.eq(b.foo(), 'A.foo2:B.foo', 'inherited and changed')
		
		
		function C () {}
		C.prototype = new B()
		C.inheritLive
		({
			bar: function () { return this.bBar() + ':C.bar' }
		}, 'b')
		
		var c = new C()
		t.eq(c.bar(), 'A.bar:B.bar:C.bar', 'tripple inherited')
	})
})
</script>
</body>
</html>