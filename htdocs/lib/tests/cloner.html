<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
	<meta name="viewport" content="width=320"/>
	<title>Cloner tests</title>
	<script src="tests.common.js" type="text/javascript"></script>
	
	<script type="text/javascript" src="../core/prototype.js"></script>
	<script type="text/javascript" src="../modules/child-indexed-path.js"></script>
	<script type="text/javascript" src="../modules/cloner.js"></script>
</head>
<body>
	
	<div id="root1" class="root">
		<dl>
			<dt class="head">head</dt>
			<dd class="body">body</dd>
		</dl>
		<p><span>123</span><span class="text">321</span></p>
	</div>
	
<script type="text/javascript">
Tests.test(function (t)
{
	function $ (id) { return document.getElementById(id) }
	
	t.test('simple tree clone', function (t)
	{
		var root = $('root1'),
			head = root.getElementsByTagName('dt')[0],
			body = root.getElementsByTagName('dd')[0],
			text = root.getElementsByTagName('span')[1]
		
		var nodes = { head: head, body: body, text: text }
		
		var cloner = new Cloner()
		cloner.bind(root, nodes)
		
		var clone = cloner.create()
		
		t.ne(clone.root, root, 'root cloned')
		t.eq(clone.root.className, root.className, 'root class cloned')
		
		t.ne(clone.nodes.head, head, 'head cloned')
		t.eq(clone.nodes.head.className, head.className, 'head class cloned')
		
		t.ne(clone.nodes.body, body, 'body cloned')
		t.eq(clone.nodes.body.className, body.className, 'body class cloned')
		
		t.ne(clone.nodes.text, text, 'text cloned')
		t.eq(clone.nodes.text.className, text.className, 'text class cloned')
		t.eq(clone.nodes.text.firstChild.nodeValue, text.firstChild.nodeValue, 'text text cloned')
	})
	
	t.test('changed tree clone', function (t)
	{
		
	})
})
</script>
</body>
</html>