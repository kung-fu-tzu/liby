<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
	<meta name="viewport" content="width=device-width"/>
	<title>Built-in event propagation tests</title>
	<script src="tests.common.js" type="text/javascript"></script>
	
	<!--[if lte IE 7]><script type="text/javascript" src="../core/fixes/trident3.js"></script><![endif]-->
	<!--[if gte IE 8]><script type="text/javascript" src="../core/fixes/trident4.js"></script><![endif]-->
</head>
<body>
<form id="form-1"><button>Click me!</button></form>
<script type="text/javascript">
function $ (id) { return document.getElementById(id) }
Tests.test(function (t)
{
	var node = $('form-1')
	
	var order = []
	node.addEventListener('submit', function (e) { order.push('form'); e.preventDefault() }, false)
	document.addEventListener('submit', function (e) { order.push('document') }, false)

	var e = document.createEvent('Event')
	e.initEvent('submit', true, true)
	node.dispatchEvent(e)
	t.like(order, ['form', 'document'], 'proper event dispatching order')
})
</script>
</body>
</html>