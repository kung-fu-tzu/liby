<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
	<meta name="viewport" content="width=320"/>
	<link rel="stylesheet" href="tests.css" type="text/css"/>
	<title>Recorder tests</title>
	<style type="text/css" media="screen">
		#block { position: absolute; z-index: 100; width: 5px; height: 5px; background: #800; }
		#control { position: absolute; left: 100px; top: 200px; }
		
		#recorder-cursor { position: absolute; z-index: 65535; width: 18px; height: 24px; margin: -3px 0 0 -3px; background: url(recorder-cursor.png); }
	</style>
</head>
<body>

<div id="block"></div>

<input type="button" id="control" value="0"/>

<!--[if lte IE 7]><script type="text/javascript" src="../programica/fixes/trident3.js"></script><![endif]-->
<!--[if gte IE 8]><script type="text/javascript" src="../programica/fixes/trident4.js"></script><![endif]-->
<script type="text/javascript" src="../programica/init.js"></script>
<script type="text/javascript" src="../programica/prototype.js"></script>

<script type="text/javascript" src="../modules/json.js"></script>
<script type="text/javascript" src="../modules/event-recorder.js"></script>
<script type="text/javascript" src="../modules/event-player.js"></script>

<!--# include virtual="tests.includes.html" -->
<script type="text/javascript">
Tests.test(function (t)
{
	var script = <!--# include virtual="recorder-script.json" -->
	
	t.test('mousemove', function (t)
	{
		var block = document.getElementById('block')
		function move (e)
		{
			var style = block.style
			style.left = e.clientX - 5 + 'px'
			style.top = e.clientY - 5 + 'px'
		}
		// document.addEventListener('mousemove', move, false)
		
		var control = document.getElementById('control')
		control.addEventListener('mousedown', function (e) { e.target.value++ }, false)
		
		var recorder = new EventRecorder()
		recorder.bind(document)
		
		// recorder.enableControls()
		
		var player = new EventPlayer()
		player.bind()
		player.load(script)
		player.play()
	})
})
</script>
</body>
</html>
