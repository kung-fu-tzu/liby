<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
	<meta name="viewport" content="width=device-width"/>
	<title>Tests for LocationHash</title>
	<script src="tests.common.js" type="text/javascript"></script>
	
	<!--[if lte IE 7]><script type="text/javascript" src="../core/fixes/trident3.js"></script><![endif]-->
	<!--[if gte IE 8]><script type="text/javascript" src="../core/fixes/trident4.js"></script><![endif]-->
	<script type="text/javascript" src="../core/prototype.js"></script>
	<script type="text/javascript" src="../core/fixes/onhashchange.js"></script>
	<script type="text/javascript" src="../modules/event-driven.js"></script>
	<script type="text/javascript" src="../modules/location-hash.js"></script>
</head>
<body>
<a id="test-1" href="blablabla##%D0%BB%D1%8F%D0%BB%D1%8F%D0%BB%D1%8F%20">blablabla</a>
<script type="text/javascript">
Tests.test(function (t)
{
	function $ (id) { return document.getElementById(id) }
	
	t.test('a.hash', function (t)
	{
		var node = $('test-1')
		t.ok(node.hash, 'unicode')
	})
	
	
	var lh = new LocationHash().bind(window)
	
	t.test('setting and getting', function (t)
	{
		lh.set('string')
		t.eq(lh.get(), 'string', 'get')
		t.eq(location.hash, '#string', 'location.hash')
		
		var text = '#%20& '
		lh.set(text)
		t.eq(lh.get(), text, 'get')
		
		var text = '# —   … ляляля 章亦春'
		lh.set(text)
		t.eq(lh.get(), text, 'get')
		
		lh.set(123)
		t.eq(lh.get(), '123', 'get')
	})
	
})
</script>
</body>
</html>