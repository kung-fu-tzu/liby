<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
	<meta name="viewport" content="width=320"/>
	<link rel="stylesheet" href="tests.css" type="text/css"/>
	<title>Base types tests</title>
</head>
<body>

<!--# include virtual="tests.includes.html" -->
<script type="text/javascript">
Tests.test(function (t)
{
	t.test('constructors', function (t)
	{
		t.eq((false).constructor, Boolean, 'Boolean')
		t.eq((true).constructor, Boolean, 'Boolean')
		
		t.eq((1).constructor, Number, 'Number')
		t.eq((1.0).constructor, Number, 'Number')
		t.eq((1e-10).constructor, Number, 'Number')
		
		t.eq(('').constructor, String, 'String')
		
		t.eq((function () {}).constructor, Function, 'Function')
		
		t.eq(([]).constructor, Array, 'Array')
		t.eq((new Array()).constructor, Array, 'Array')
		
		t.eq(({}).constructor, Object, 'Object')
		t.eq((new Object()).constructor, Object, 'Object')
		
		t.eq((new Date()).constructor, Date, 'Date')
		
		t.eq((/abc/).constructor, RegExp, 'RegExp')
		t.eq((new RegExp()).constructor, RegExp, 'RegExp')
	})
	
	t.test('falses', function (t)
	{
		try
		{
			(null).constructor
			t.fail('null has a constructor')
		}
		catch (ex) { t.pass(['null', ex.message]) }
		
		try
		{
			(undefined).constructor
			t.fail('undefined has a constructor')
		}
		catch (ex) { t.pass(['undefined', ex.message]) }
	})
	
	
	t.test('prototypes', function (t)
	{
		Boolean.prototype.xxx1 = 123
		t.eq((false).xxx1, 123, 'Boolean')
		t.eq((true).xxx1, 123, 'Boolean')
		delete Boolean.prototype.xxx1
		t.eq((false).xxx1, undefined, 'Boolean deleted')
		t.eq((true).xxx1, undefined, 'Boolean deleted')
		
		
		Number.prototype.xxx2 = 123
		t.eq((1).xxx2, 123, 'Number')
		t.eq((1.0).xxx2, 123, 'Number')
		t.eq((1e-10).xxx2, 123, 'Number')
		delete Number.prototype.xxx2
		t.eq((1).xxx2, undefined, 'Number')
		t.eq((1.0).xxx2, undefined, 'Number')
		t.eq((1e-10).xxx2, undefined, 'Number')
		
		String.prototype.xxx3 = 123
		t.eq(('').xxx3, 123, 'String')
		delete String.prototype.xxx3
		t.eq(('').xxx3, undefined, 'String')
		
		Function.prototype.xxx4 = 123
		t.eq((function () {}).xxx4, 123, 'Function')
		delete Function.prototype.xxx4
		t.no('xxx4' in (function () {}), 'Function')
		
		Array.prototype.xxx5 = 123
		t.eq(([]).xxx5, 123, 'Array')
		t.eq((new Array()).xxx5, 123, 'Array')
		delete Array.prototype.xxx5
		t.no('xxx5' in ([]), 'Array')
		t.no('xxx5' in (new Array()), 'Array')
		
		Object.prototype.xxx6 = 123
		t.eq(({}).xxx6, 123, 'Object')
		delete Object.prototype.xxx6
		t.no('xxx6' in ({}), 'Object')
		
		Date.prototype.xxx7 = 123
		t.eq((new Date()).xxx7, 123, 'Date')
		delete Date.prototype.xxx7
		t.eq((new Date()).xxx7, undefined, 'Date')
		
		RegExp.prototype.xxx8 = 123
		t.eq((/abc/).xxx8, 123, 'RegExp')
		t.eq((new RegExp()).xxx8, 123, 'RegExp')
		delete RegExp.prototype.xxx8
		t.no('xxx8' in (/abc/), 'RegExp')
		t.no('xxx8' in (new RegExp()), 'RegExp')
	})
	
	t.test('hasOwnProperty', function (t)
	{
		function A () { this.x = 1 }
		A.prototype.y = 2
		var a = new A()
		
		t.eq(a.x, 1)
		t.eq(a.y, 2)
		t.ok(a.hasOwnProperty('x'))
		t.no(a.hasOwnProperty('y'))
		delete a.x
		t.no(a.hasOwnProperty('x'))
		a.x = 1
		t.ok(a.hasOwnProperty('x'))
	})
	
	t.test('etc', function (t)
	{
		
		t.ne((function () {}).prototype, (function () {}).prototype, 'different default prototypes')
	})
	
})
</script>
</body>
</html>
