<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru">
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
	<link rel="stylesheet" href="tests.css" type="text/css"/>
	<title>Custom array class tests</title>
</head>
<body>

<script type="text/javascript" src="tests.js"></script>
<script type="text/javascript">
Tests.job(function (job)
{
	function SuperArray () {}
	SuperArray.prototype = new Array()
	
	job.test('push', function (test)
	{
		test.time('super.push')
		var arr = new SuperArray()
		for (var i = 0; i < 100000; i++)
			arr.push(i)
		test.timeEnd('super.push')
		
		test.time('simple.push')
		var arr = new Array()
		for (var i = 0; i < 100000; i++)
			arr.push(i)
		test.timeEnd('simple.push')
		
		test.time('native.push')
		var arr = []
		for (var i = 0; i < 100000; i++)
			arr.push(i)
		test.timeEnd('native.push')
	})
	
	job.test('access', function (test)
	{
		test.time('super[]')
		var arr = new SuperArray()
		for (var i = 0; i < 100000; i++)
			arr[i] = i
		test.timeEnd('super[]')
		
		test.time('simple[]')
		var arr = new Array()
		for (var i = 0; i < 100000; i++)
			arr[i] = i
		test.timeEnd('simple[]')
		
		test.time('native[]')
		var arr = []
		for (var i = 0; i < 100000; i++)
			arr[i] = i
		test.timeEnd('native[]')
	})
	
	job.test('sort', function (test)
	{
		var arr = new SuperArray()
		for (var i = 100000; i > 100; i--)
			arr[i] = -i
		test.time('super.sort')
		arr.sort()
		test.timeEnd('super.sort')
		test.ne(arr[0], -1000, 'super.sort does not sort')
		
		var arr = new Array()
		for (var i = 100000; i > 100; i--)
			arr[i] = -i
		test.time('simple.sort')
		arr.sort()
		test.timeEnd('simple.sort')
		test.eq(arr[0], -1000, 'simple.sort')
		
		var arr = []
		for (var i = 100000; i > 100; i--)
			arr[i] = -i
		test.time('native.sort')
		arr.sort()
		test.timeEnd('native.sort')
		test.eq(arr[0], -1000, 'native.sort')
	})
	
})
</script>
</body>
</html>
