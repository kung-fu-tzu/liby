<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru" id="event-page" class="loading finans-bank-forum-2 status-archive">
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
	<link rel="stylesheet" href="tests.css" type="text/css"/>
	<title>object.__poto__ tests</title>
</head>
<body>

<!--[if lte IE 7]><script type="text/javascript" src="../programica/fixes/trident3.js"></script><![endif]-->
<!--[if IE 8]><script type="text/javascript" src="../programica/fixes/trident4.js"></script><![endif]-->
<script type="text/javascript" src="../programica/fixes/log.js"></script>
<script type="text/javascript" src="../programica/init.js"></script>

<script type="text/javascript" src="tests.js"></script>
<script type="text/javascript">
	window.addEventListener('load', function () {
	tests.plan(2)
	
	function A () {}
	A.prototype = {xxx:777}
	
	var obj = {}
	tests.eq(obj.xxx, undefined, 'xxx is undefined')
	
	obj.__proto__ = A.prototype
	tests.eq(obj.xxx, 777, 'xxx is 777')
	
	function bakeObjects (count)
	{
		var res = []
		for (var i = 0; i < count; i++)
			res[i] = {a:1, b:2, c:3, d:4, e:5}
		return res
	}
	
	var hashes = bakeObjects(10000)
	tests.time('new + for in')
	for (var i = 0, il = hashes.length; i < il; i++)
	{
		var obj = new A(),
			hash = hashes[i]
		for (var k in hash)
			obj[k] = hash[k]
	}
	tests.timeEnd('new + for in')
	
	tests.time('new + keys')
	for (var i = 0, il = hashes.length; i < il; i++)
	{
		var obj = new A(),
			hash = hashes[i]
		
		obj.a = hash.a
		obj.b = hash.b
		obj.c = hash.c
		obj.d = hash.d
		obj.e = hash.e
	}
	tests.timeEnd('new + keys')
	
	tests.time('new + data')
	for (var i = 0, il = hashes.length; i < il; i++)
	{
		var obj = new A()
		obj.data = hashes[i]
	}
	tests.timeEnd('new + data')
	
	var proto = A.prototype
	tests.time('new + __proto__')
	for (var i = 0, il = hashes.length; i < il; i++)
	{
		hashes[i].__proto__ = proto
	}
	tests.timeEnd('new + __proto__')
	
	
	
	tests.done()
	}, false)
</script>
</body>
</html>
