<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru" id="event-page" class="loading finans-bank-forum-2 status-archive">
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
	<link rel="stylesheet" href="tests.css" type="text/css"/>
	<title>Event classes tests</title>
</head>
<body>

<ul id="test-1-0"></ul>
<ul id="test-1-1"></ul>
<ul id="test-1-2"></ul>
<ul id="test-2" style="visibility: hidden"></ul>
<ul id="test-3" style="display: none"></ul>
<ul id="test-4" style="width: 100px; height: 100px; overflow: hidden"></ul>
<ul id="test-5" style="position: absolute"></ul>
<ul id="test-6"></ul>

<!--[if lte IE 7]><script type="text/javascript" src="../programica/fixes/trident3.js"></script><![endif]-->
<!--[if IE 8]><script type="text/javascript" src="../programica/fixes/trident4.js"></script><![endif]-->
<script type="text/javascript" src="../programica/fixes/log.js"></script>
<script type="text/javascript" src="../programica/init.js"></script>

<script type="text/javascript" src="tests.js"></script>
<script type="text/javascript">
	window.addEventListener('load', function () {
	tests.plan(0)
	
	var globalTime = new Date()
	
	function fill (root)
	{
		var nodes = []
		// tests.time('fill')
		for (var i = 0; i < 3000; i++)
			root.appendChild(nodes[i] = document.createElement('li')).appendChild(document.createTextNode(i))
		// tests.timeEnd('fill')
		return nodes
	}
	
	function job (root, nodes)
	{
		for (var i = 0, il = nodes.length; i < il; i++)
			root.appendChild(nodes[i])
	}
	
	
	
	tests.test(function ()
	{
		var root = document.getElementById('test-1-0'),
			nodes = fill(root)
		
		// warming
		job(root, nodes)
		
		tests.time('normal')
		job(root, nodes)
		this.next(function () { tests.timeEnd('normal') })
	})
	
	tests.test(function ()
	{
		var root = document.getElementById('test-1-1'),
			nodes = fill(root)
		
		// warming
		job(root, nodes)
		
		
		tests.time('style.visibility = hidden')
		root.style.visibility = 'hidden'
		job(root, nodes)
		root.style.visibility = 'visible'
		this.next(function () { tests.timeEnd('style.visibility = hidden') })
	})
	
	tests.test(function ()
	{
		var root = document.getElementById('test-1-2'),
			nodes = fill(root)
		
		// warming
		job(root, nodes)
		
		tests.time('style.display = none')
		root.style.display = 'none'
		job(root, nodes)
		root.style.display = 'block'
		this.next(function () { tests.timeEnd('style.display = none') })
	})
	
	
	tests.test(function ()
	{
		var root = document.getElementById('test-2'),
			nodes = fill(root)
		
		// warming
		job(root, nodes)
		
		tests.time('visibility: hidden')
		job(root, nodes)
		this.next(function () { tests.timeEnd('visibility: hidden') })
	})
	
	
	tests.test(function ()
	{
		var root = document.getElementById('test-3'),
			nodes = fill(root)
		
		// warming
		job(root, nodes)
		
		tests.time('display: none')
		job(root, nodes)
		this.next(function () { tests.timeEnd('display: none') })
	})
	
	
	tests.test(function ()
	{
		var root = document.getElementById('test-4'),
			nodes = fill(root)
		
		// warming
		job(root, nodes)
		
		tests.time('overflow: hidden')
		job(root, nodes)
		tests.next(function () { tests.timeEnd('overflow: hidden') })
	})
	
	
	tests.test(function ()
	{
		var root = document.getElementById('test-5'),
			nodes = fill(root)
		
		// warming
		job(root, nodes)
		
		tests.time('position: absolute')
		job(root, nodes)
		tests.next(function () { tests.timeEnd('position: absolute') })
	})
	
	
	tests.test(function ()
	{
		var root = document.getElementById('test-5'),
			nodes = fill(root)
		
		// warming
		job(root, nodes)
		
		var parent = root.parentNode
		tests.time('removed-n-appended')
		parent.removeChild(root)
		job(root, nodes)
		parent.appendChild(root)
		tests.next(function () { tests.timeEnd('removed-n-appended') })
	})
	
	
	tests.test(function ()
	{
		var root = document.createElement('ul'),
			nodes = fill(root)
		
		// warming
		job(root, nodes)
		
		tests.time('not appended')
		job(root, nodes)
		tests.next(function () { tests.timeEnd('not appended') })
	})
	
	// tests.next.sync = true
	tests.start()
	}, false)
</script>
</body>
</html>
