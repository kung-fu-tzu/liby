<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="viewport" content="width=device-width"/>
	<title>Request tests</title>
	<script src="../test-framework/tests.common.js"></script>
	
	<!--[if IE 8]><script src="../../fixes/trident4/trident4.js"></script><![endif]-->
	<script src="../../modules/url-encode.js"></script>
	<script src="../../modules/request.js"></script>
</head>
<body>

<script>
Tests.test(function (t)
{
	t.test('GET', function (t)
	{
		t.expect(2)
		
		function callback (r)
		{
			t.eq(r.status, 200, 'status')
			t.match(r.responseText, /Request tests/i, 'title')
			t.done()
		}
		Request.get('?', callback)
		t.wait(1000)
	})
	
	t.test('HEAD', function (t)
	{
		t.expect(2)
		
		function callback (r)
		{
			t.eq(r.status, 200, 'status')
			t.eq(r.responseText, '', 'title')
			t.done()
		}
		Request.head('?', callback)
		t.wait(1000)
	})
	
	t.test('POST', function (t)
	{
		t.expect(2)
		
		function callback (r)
		{
			t.eq(r.status, 405, 'status')
			t.match(r.responseText, /Not Allowed/i, 'title')
			t.done()
		}
		Request.post('?', 'data', callback)
		t.wait(1000)
	})
})
</script>
</body>
</html>
