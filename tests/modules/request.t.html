<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="viewport" content="width=device-width"/>
	<title>Request</title>
	<script src="../test-framework/tests.common.js"></script>
	
	<script>Liby = {}</script>
	<script src="../../modules/request.js"></script>
</head>
<body>

<script>
Tests.test(function (t)
{
	t.test('GET', function (t)
	{
		t.expect(2)
		
		function callback (body, status)
		{
			t.eq(status, 200, 'status')
			t.match(body, /Request tests/i, 'title')
			t.done()
		}
		Liby.Request.get('?', callback)
	})
	
	t.test('HEAD', function (t)
	{
		t.expect(2)
		
		function callback (body, status)
		{
			t.eq(status, 200, 'status')
			t.eq(body, '', 'title')
			t.done()
		}
		Liby.Request.head('?', callback)
		t.wait(3000)
		t.wait(30000)
	})
	
	t.test('POST', function (t)
	{
		t.expect(2)
		
		function callback (body, status)
		{
			t.eq(status, 405, 'status')
			t.match(body, /Not Allowed/i, 'title')
			t.done()
		}
		Liby.Request.post('?', 'data', callback)
		t.wait(30000)
	})
	
	t.test('PUT', function (t)
	{
		t.expect(2)
		
		function callback (body, status)
		{
			t.eq(status, 405, 'status')
			t.match(body, /Not Allowed/i, 'title')
			t.done()
		}
		Liby.Request.open('PUT', '?', 'data', callback)
		t.wait(30000)
	})
})
</script>
</body>
</html>
